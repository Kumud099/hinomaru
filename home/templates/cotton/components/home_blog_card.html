{% load wagtailimages_tags %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Swiper CSS & JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body>
    <div class="container px-4 py-12 mx-auto sm:px-6 md:px-8 lg:px-10 xl:px-16">
      <!-- Swiper Container (Fixed Width, Single Row) -->
      <div class="relative swiper mySwiper">
        <!-- Swiper Wrapper -->
        <div class="swiper-wrapper border-1 rounded-xl">
          {% for blog in blogs %}
          <a
            href="{{ blog.url }}"
            class="space-y-4 bg-white border-2 border-gray-300 rounded-md shadow-md hover:border-red-700 swiper-slide"
          >
            <!-- Blog Image with Hover Effect -->
            <div class="relative p-4">
              <div class="image-container">
                <!-- image -->
                {% image blog.blog_cover_image width-400 as blog_cover %}
                <img
                  src="{{ blog_cover.url }}"
                  alt="Blog Image"
                  class="object-cover h-64 rounded-md"
                />
                <div class="image-overlay"></div>
              </div>
            </div>

            <div class="px-4">
              <h3 class="-mt-5 text-xl font-bold">
                {% with blog.blog_title.split as words %}
                <span class="text-[#991b1b]">{{ words.0 }}</span>
                <span class="text-black"
                  >{{ words|slice:"1:"|join:" "|truncatewords:5 }}</span
                >
                {% endwith %}
              </h3>

              <p class="mb-5 text-gray-500">
                {{ blog.blog_description | truncatewords:9 }}
              </p>

              <!-- for tags if any nlog have -->
              {% if blog.categories.all %}
              <div class="flex gap-2 mb-3 -mt-4">
                {% for category in blog.categories.all %}
                <span class="px-2 py-1 text-red-500 bg-red-100 rounded"
                  >{{ category.name }}</span
                >
                {% endfor %}
              </div>
              {% endif %}
            </div>
          </a>
          {% endfor %}
        </div>

        <div class="mt-16">
          <!-- Pagination -->
          <div class="swiper-pagination"></div>
        </div>

        <!-- Navigation Arrows -->
        <div
          class="absolute z-10 transform -translate-y-1/2 swiper-button-prev top-1/2 left-2"
        ></div>
        <div
          class="absolute z-10 transform -translate-y-1/2 swiper-button-next top-1/2 right-4"
        ></div>
      </div>
    </div>

    {% load static %}
    <link rel="stylesheet" href="{% static 'css/home_blog_card.css' %}" />

    <!-- Swiper Initialization -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        new Swiper(".mySwiper", {
          slidesPerView: "auto", // Ensure slides fit their defined width
          spaceBetween: 30, // Adjust space between slides
          loop: true, // Enable infinite loop
          navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
          },
          pagination: {
            el: ".swiper-pagination",
            clickable: true,
          },
        });
      });
    </script>
  </body>
</html>