<!-- Navbar -->
{% load static %}
<nav
  id="navbar"
  class="fixed top-0 left-0 z-50 w-full h-fit 
    {% if txtcolor %} text-{{ txtcolor }} {% else %} text-white {% endif %}
    {% if backgroundcolor == 'white' %} bg-red-800 
    {% else %} bg-transparent {% endif %} scroll-nav"
>
  <!-- <nav
  id="navbar"
  class="fixed top-0 left-0 z-50 w-full h-fit bg-transparent text-white transition-all scroll-nav"
> -->
  <div class="flex items-center justify-between px-6">
    <!-- Logo -->
    <div class="flex items-center gap-5 pt-4 ml-10 text-3xl pb-2">
      <img src="{% static 'images/logo.png' %}" alt="logo" />
      <span
        id="hinomaru-text"
        class="font-Play font-bold text-[36px] md:text-[36px] lg:text-[36px] 2xl:text-[40px] text-[#991b1b]"
        style="
          text-shadow: 1px 1px 0 #991b1b, -1px -1px 0 #991b1b,
            1px -1px 0 #991b1b, -1px 1px 0 #991b1b;
        "
      >
        HINOMARU TECH
      </span>
    </div>

    <!-- Menu Button (Hamburger) for mobile screens -->
    <button
      id="hamburger"
      class="lg:hidden text-white border-2 border-white bg-black rounded-full w-11 h-11 flex items-center justify-center"
    >
      <span id="hamburger-icon" class="text-3xl pb-1">&#9776;</span>
    </button>

    <!-- Desktop Navigation (Visible only on 2xl and xl screens) -->
    <div
      class="hidden xl:flex 2xl:flex flex-1 justify-center space-x-6 text-2xl 2xl:text-2xl"
    >
      <a
        href="{% url 'home' %}"
        class="px-3 py-8 text-[#991b1b] hover:underline"
        style="
          text-shadow: 1px 1px 0 #991b1b, -1px -1px 0 #991b1b,
            1px -1px 0 #991b1b, -1px 1px 0 #991b1b;
          text-decoration-thickness: 2px;
          text-underline-offset: 10px;
        "
        >HOME</a
      >

      <!-- Services Button (Keep Inside the Relative Wrapper) -->
      <div class="group relative" id="services-btn">
        <button
          class="px-3 py-8 text-[#991b1b] hover:underline"
          style="
            text-shadow: 1px 1px 0 #991b1b, -1px -1px 0 #991b1b,
              1px -1px 0 #991b1b, -1px 1px 0 #991b1b;
            text-decoration-thickness: 2px;
            text-underline-offset: 10px;
          "
        >
          SERVICES
        </button>

        <!-- Dropdown Menu (Move Outside) -->
        <div
          class="absolute left-0 top-full hidden group-hover:flex justify-center p-6 flex-wrap grid grid-cols-2 gap-4 bg-white shadow-lg border border-gray-200 text-center transition-opacity duration-300 ease-in-out"
        >
          <a
            href="#"
            class="block px-4 py-2 text-gray-700 hover:bg-orange-400 flex items-center justify-center gap-2"
          >
            <i class="fa fa-laptop text-[#991b1b]"></i> Web Development
          </a>
          <a
            href="#"
            class="block px-4 py-2 text-gray-700 hover:bg-orange-400 flex items-center justify-center gap-2"
          >
            <i class="fa fa-code text-[#991b1b]"></i> Software Development
          </a>
          <a
            href="#"
            class="block px-4 py-2 text-gray-700 hover:bg-orange-400 flex items-center justify-center gap-2"
          >
            <i class="fa fa-digital-tachograph text-[#991b1b]"></i> App
            Development
          </a>
          <a
            href="#"
            class="block px-4 py-2 text-gray-700 hover:bg-orange-400 flex items-center justify-center gap-2"
          >
            <i class="fa fa-cogs text-[#991b1b]"></i> System Integration
          </a>
        </div>
      </div>

      <a
        href="{% url 'home' %}#aboutUsContainer"
        class="px-6 py-8 text-[#991b1b] hover:underline"
        style="
          text-shadow: 1px 1px 0 #991b1b, -1px -1px 0 #991b1b,
            1px -1px 0 #991b1b, -1px 1px 0 #991b1b;
          text-decoration-thickness: 2px;
          text-underline-offset: 10px;
        "
      >
        ABOUT US
      </a>
    </div>

    <!-- Contact Us Button (Right Aligned, Hidden on screens < 1200px) -->
    <a
      href="/contact-us"
      id="contact-button"
      class="relative inline-flex items-center justify-start rounded-md px-4 py-2 overflow-hidden font-medium transition-all bg-white border-2 border-[#991b1b] rounded-md hover:bg-black hover:text-white group xl:flex 2xl:flex hidden"
    >
      <span
        class="w-48 h-48 rounded rotate-[-40deg] bg-black border-black b-2 absolute bottom-0 left-0 -translate-x-full ease-out duration-500 transition-all translate-y-full mb-9 ml-9 group-hover:ml-0 group-hover:mb-32 group-hover:translate-x-0"
      ></span>
      <span
        class="relative w-full text-left text-[#991b1b] transition-colors duration-300 ease-in-out px-2 group-hover:text-white"
      >
        Contact
      </span>
    </a>
  </div>

  <!-- Mobile Menu (Improved Layout) -->
  <div
    id="mobile-menu"
    class="hidden flex flex-col items-center space-y-6 text-[#991b1b] py-6 px-4 w-full shadow-lg rounded-lg"
  >
    <hr class="border-t border-gray-300 w-full" />

    <!-- Home, Services, About Us - First Row -->
    <div class="flex w-full justify-between gap-2">
      <!-- Home -->
      <a
        href="{% url 'home' %}"
        class="flex-1 min-w-[100px] px-3 py-2 flex items-center justify-center space-x-1 text-sm font-semibold rounded-lg bg-gray-100 hover:bg-orange-400 hover:text-white transition-all"
      >
        <i class="fas fa-home text-lg sm:text-xl"></i>
        <span>HOME</span>
      </a>

      <!-- Services Button -->
      <div class="relative group flex-1 min-w-[100px]">
        <button
          id="mobile-services"
          class="w-full px-3 py-2 flex items-center justify-center space-x-1 text-sm font-semibold rounded-lg bg-gray-100 hover:bg-orange-400 hover:text-white transition-all"
        >
          <i class="fas fa-cogs text-lg sm:text-xl"></i>
          <span>SERVICES</span>
        </button>

        <!-- Dropdown Menu -->
        <div
          id="mobile-dropdown"
          class="absolute left-1/2 transform -translate-x-1/2 w-max bg-white text-black rounded-lg shadow-md mt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 ease-in-out z-10"
        >
          <a
            href="#"
            class="px-4 py-2 flex items-center space-x-2 rounded-lg hover:bg-gray-100"
          >
            <i class="fas fa-laptop text-sm sm:text-base text-red-500"></i>
            <span class="text-xs sm:text-sm text-red-500">Web Development</span>
          </a>
          <a
            href="#"
            class="px-4 py-2 flex items-center space-x-2 rounded-lg hover:bg-gray-100"
          >
            <i class="fas fa-code text-sm sm:text-base text-red-500"></i>
            <span class="text-xs sm:text-sm text-red-500"
              >Software Development</span
            >
          </a>
          <a
            href="#"
            class="px-4 py-2 flex items-center space-x-2 rounded-lg hover:bg-gray-100"
          >
            <i
              class="fas fa-digital-tachograph text-sm sm:text-base text-red-500"
            ></i>
            <span class="text-xs sm:text-sm text-red-500">App Development</span>
          </a>
          <a
            href="#"
            class="px-4 py-2 flex items-center space-x-2 rounded-lg hover:bg-gray-100"
          >
            <i class="fas fa-cogs text-sm sm:text-base text-red-500"></i>
            <span class="text-xs sm:text-sm text-red-500"
              >System Integration</span
            >
          </a>
        </div>
      </div>

      <!-- About Us -->
      <a
        href="{% url 'home' %}#aboutUsContainer"
        class="flex-1 min-w-[100px] px-3 py-2 flex items-center justify-center space-x-1 text-sm font-semibold rounded-lg bg-gray-100 hover:bg-orange-400 hover:text-white transition-all"
      >
        <i class="fas fa-info-circle text-lg sm:text-xl"></i>
        <span>ABOUT US</span>
      </a>
    </div>

    <hr class="border-t border-gray-300 w-full" />

    <!-- Contact Us - Second Row (Centered) -->
    <div class="w-full flex justify-center">
      <a
        href="/contact-us"
        class="relative inline-flex items-center justify-center px-6 py-3 overflow-hidden font-medium transition-all bg-black rounded-xl hover:bg-orange-400 group"
      >
        <span
          class="w-48 h-48 rounded-full rotate-[-40deg] bg-orange-400 absolute bottom-0 left-0 -translate-x-full ease-out duration-500 transition-all translate-y-full mb-9 ml-9 group-hover:ml-0 group-hover:mb-32 group-hover:translate-x-0"
        ></span>
        <span
          class="relative w-full text-center text-white text-sm sm:text-lg transition-colors duration-300 ease-in-out group-hover:text-black"
        >
          <i class="fas fa-envelope text-lg sm:text-xl"></i>
          Contact us
        </span>
      </a>
    </div>
  </div>
</nav>
<!-- JavaScript for Mobile Menu Toggle and Services Hover Effect -->

<script>
  const hamburgerButton = document.getElementById("hamburger");
  const hamburgerIcon = document.getElementById("hamburger-icon");
  const menu = document.getElementById("mobile-menu");
  const navbar = document.getElementById("navbar");
  const hinomaruText = document.getElementById("hinomaru-text");
  const servicesBtn = document.getElementById("services-btn");

  hamburgerButton.addEventListener("click", function () {
    // Toggle the visibility of the menu
    menu.classList.toggle("hidden");
    menu.classList.toggle("flex");

    // Toggle between hamburger and cross icon
    if (menu.classList.contains("flex")) {
      navbar.classList.remove("bg-white");
      hinomaruText.classList.remove("text-red-500");
      hinomaruText.style.textShadow =
        "1px 1px 0 #FF5722, -1px -1px 0 #FF5722, 1px -1px 0 #FF5722, -1px 1px 0 #FF5722"; // Reapply text shadow
    } else {
      hamburgerIcon.innerHTML = "&#9776;"; // Hamburger icon
      //   navbar.classList.add("bg-white");

      // Change text color to red when navbar is white
      hinomaruText.classList.add("text-white");
      hinomaruText.classList.remove("text-white");
      hinomaruText.style.textShadow = "none"; // Remove text shadow when text is red
    }
  });

  // Change navbar background and text color on hover of the services button
  servicesBtn.addEventListener("mouseover", function () {
    navbar.classList.add("");
    // when hovered the bg is null transparent in home page
    hinomaruText.classList.add("text-[#991b1b]");
    hinomaruText.classList.remove("text-[#991b1b]");
    hinomaruText.style.textShadow = "none"; // Remove text shadow when text is red
  });

  servicesBtn.addEventListener("mouseout", function () {
    navbar.classList.remove("bg-white");
    hinomaruText.classList.remove("text-red-500");
    hinomaruText.classList.add("text-white");
    hinomaruText.style.textShadow =
      "1px 1px 0 #FF5722, -1px -1px 0 #FF5722, 1px -1px 0 #FF5722, -1px 1px 0 #FF5722"; // Reapply text shadow when text is white
  });

  window.addEventListener("scroll", function () {
    if (window.innerWidth >= 1024) {
      if (window.scrollY > 50) {
        navbar.classList.add("scrolled");
        hinomaruText.classList.remove("text-[#991b1b]");
        hinomaruText.classList.add("text-white");
      } else {
        navbar.classList.remove("scrolled");
        hinomaruText.classList.remove("text-white");
        hinomaruText.classList.add("text-[#991b1b]");
      }
    }
  });
</script>

<style>
  .w-screen {
    width: 100vw !important;
  }

  .scroll-nav.scrolled {
    color: white !important;
  }

  .scroll-nav.scrolled a {
    color: white !important;
  }

  .scroll-nav.scrolled #hinomaru-text {
    color: white !important;
    text-shadow: none;
  }

  a:hover {
    border-color: transparent; /* Remove border on hover */
  }

  a:hover .bg-black {
    border-color: #991b1b;
  }
</style>
