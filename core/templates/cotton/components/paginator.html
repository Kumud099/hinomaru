<div class="flex items-center mx-4 justify-center space-x-3 bg-[#1e1e1e] p-4 rounded-lg">
  <!-- Previous Button -->
  <a
    href="{% if object.has_previous %}?page={{ object.previous_page_number }}{% endif %}"
    class="px-4 py-2 text-white bg-gray-700 rounded-lg hover:bg-red-800 transition-all {% if not object.has_previous %}opacity-50 cursor-not-allowed{% endif %}"
    aria-label="Previous Page"
    {% if not object.has_previous %}tabindex="-1" aria-disabled="true"{% endif %}
  >
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
      <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"/>
    </svg>
  </a>

  <!-- Page Numbers -->
  {% with object.paginator.num_pages as total_pages %}
    {% with object.number as current_page %}
      {% if current_page == total_pages %}
        <!-- If we're at the last page, show the last 3 pages -->
        {% for num in object.paginator.page_range %}
          {% if num >= total_pages|add:-2 %}
            <a href="?page={{ num }}" 
               class="px-4 py-2 rounded-lg {% if current_page == num %}bg-red-800 text-white{% else %}text-white hover:bg-red-800{% endif %}">
              {{ num }}
            </a>
          {% endif %}
        {% endfor %}
      {% elif current_page == 1 %}
        <!-- If we're on the first page, show pages 1, 2, and 3 -->
        {% for num in object.paginator.page_range %}
          {% if num <= 3 %}
            <a href="?page={{ num }}" 
               class="px-4 py-2 rounded-lg {% if current_page == num %}bg-red-800 text-white{% else %}text-white hover:bg-red-800{% endif %}">
              {{ num }}
            </a>
          {% endif %}
        {% endfor %}
      {% else %}
        <!-- For pages in between, show a window of 3 consecutive pages -->
        {% for num in object.paginator.page_range %}
          {% if num >= current_page|add:-1 and num <= current_page|add:1 %}
            <a href="?page={{ num }}" 
               class="px-4 py-2 rounded-lg {% if current_page == num %}bg-red-800 text-white{% else %}text-white hover:bg-red-800{% endif %}">
              {{ num }}
            </a>
          {% endif %}
        {% endfor %}
      {% endif %}
    {% endwith %}
  {% endwith %}

  <!-- Next Button -->
  <a
    href="{% if object.has_next %}?page={{ object.next_page_number }}{% endif %}"
    class="px-4 py-2 text-white transition-all bg-gray-700 rounded-lg hover:bg-red-800 {% if not object.has_next %}opacity-50 cursor-not-allowed{% endif %}"
    aria-label="Next Page"
    {% if not object.has_next %}tabindex="-1" aria-disabled="true"{% endif %}
  >
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
      <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"/>
    </svg>
  </a>
</div>
